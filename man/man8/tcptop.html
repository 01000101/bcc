Content-type: text/html; charset=UTF-8

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of tcptop</TITLE>
</HEAD><BODY>
<H1>tcptop</H1>
Section: Maintenance Commands (8)<BR>Updated: 2016-09-13<BR><A HREF="#index">Index</A>
<A HREF="https://iovisor.github.io/bcc">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

tcptop - Summarize TCP send/recv throughput by host. Top for TCP.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>tcptop [-h] [-C] [-S] [-p PID] [interval] [count]</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

This is top for TCP sessions.
<P>
This summarizes TCP send/receive Kbytes by host, and prints a summary that
refreshes, along other system-wide metrics.
<P>
This uses dynamic tracing of kernel TCP send/receive functions, and will
need to be updated to match kernel changes.
<P>
The traced TCP functions are usually called at a lower rate than
per-packet functions, and therefore have lower overhead. The traced data is
summarized in-kernel using a BPF map to further reduce overhead. At very high
TCP event rates, the overhead may still be measurable. See the OVERHEAD
section for more details.
<P>
Since this uses BPF, only the root user can use this tool.
<A NAME="lbAE">&nbsp;</A>
<H2>REQUIREMENTS</H2>

CONFIG_BPF and bcc.
<A NAME="lbAF">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT>-h<DD>
Print USAGE message.
<DT>-C<DD>
Don't clear the screen.
<DT>-S<DD>
Don't print the system summary line (load averages).
<DT>-p PID<DD>
Trace this PID only.
<DT>interval<DD>
Interval between updates, seconds (default 1).
<DT>count<DD>
Number of interval summaries (default is many).
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>EXAMPLES</H2>

<DL COMPACT>
<DT>Summarize TCP throughput by active sessions, 1 second refresh:<DD>
#
<B>tcptop</B>

<DT>Don't clear the screen (rolling output), and 5 second summaries:<DD>
#
<B>tcptop -C 5</B>

<DT>Trace PID 181 only, and don't clear the screen:<DD>
#
<B>tcptop -Cp 181</B>

</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>FIELDS</H2>

<DL COMPACT>
<DT>loadavg:<DD>
The contents of /proc/loadavg
<DT>PID<DD>
Process ID.
<DT>COMM<DD>
Process name.
<DT>LADDR<DD>
Local address (IPv4), and TCP port
<DT>RADDR<DD>
Remote address (IPv4), and TCP port
<DT>LADDR6<DD>
Source address (IPv6), and TCP port
<DT>RADDR6<DD>
Destination address (IPv6), and TCP port
<DT>RX_KB<DD>
Received Kbytes
<DT>TX_KB<DD>
Transmitted Kbytes
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>OVERHEAD</H2>

This traces all send/receives in TCP, high in the TCP/IP stack (close to the
application) which are usually called at a lower rate than per-packet
functions, lowering overhead. It also summarizes data in-kernel to further
reduce overhead. These techniques help, but there may still be measurable
overhead at high send/receive rates, eg, ~13% of one CPU at 100k events/sec.
use funccount to count the kprobes in the tool to find out this rate, as the
overhead is relative to the rate. Some sample production servers tested found
total TCP event rates of 4k to 15k per second, and the CPU overhead at these
rates ranged from 0.5% to 2.0% of one CPU. If your send/receive rate is low
(eg, &lt;1000/sec) then the overhead is expected to be negligible; Test in a lab
environment first.
<A NAME="lbAJ">&nbsp;</A>
<H2>SOURCE</H2>

This is from bcc.
<DL COMPACT>
<DT><DD>
<A HREF="https://github.com/iovisor/bcc">https://github.com/iovisor/bcc</A>
</DL>
<P>

Also look in the bcc distribution for a companion _examples.txt file containing
example usage, output, and commentary for this tool.
<A NAME="lbAK">&nbsp;</A>
<H2>OS</H2>

Linux
<A NAME="lbAL">&nbsp;</A>
<H2>STABILITY</H2>

Unstable - in development.
<A NAME="lbAM">&nbsp;</A>
<H2>AUTHOR</H2>

Brendan Gregg
<A NAME="lbAN">&nbsp;</A>
<H2>INSPIRATION</H2>

<A HREF="https://iovisor.github.io/bcc?1+top">top</A>(1) by William LeFebvre
<A NAME="lbAO">&nbsp;</A>
<H2>SEE ALSO</H2>

<A HREF="https://iovisor.github.io/bcc?8+tcpconnect">tcpconnect</A>(8), <A HREF="https://iovisor.github.io/bcc?8+tcpaccept">tcpaccept</A>(8)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">REQUIREMENTS</A><DD>
<DT><A HREF="#lbAF">OPTIONS</A><DD>
<DT><A HREF="#lbAG">EXAMPLES</A><DD>
<DT><A HREF="#lbAH">FIELDS</A><DD>
<DT><A HREF="#lbAI">OVERHEAD</A><DD>
<DT><A HREF="#lbAJ">SOURCE</A><DD>
<DT><A HREF="#lbAK">OS</A><DD>
<DT><A HREF="#lbAL">STABILITY</A><DD>
<DT><A HREF="#lbAM">AUTHOR</A><DD>
<DT><A HREF="#lbAN">INSPIRATION</A><DD>
<DT><A HREF="#lbAO">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="https://iovisor.github.io/bcc">man2html</A>,
using the manual pages.<BR>
Time: 17:11:49 GMT, February 25, 2020
</BODY>
</HTML>
