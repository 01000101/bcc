Content-type: text/html; charset=UTF-8

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Man page of tcpdrop</TITLE>
</HEAD><BODY>
<H1>tcpdrop</H1>
Section: Maintenance Commands (8)<BR>Updated: 2018-05-30<BR><A HREF="#index">Index</A>
<A HREF="https://iovisor.github.io/bcc">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

tcpdrop - Trace kernel-based TCP packet drops with details. Uses Linux eBPF/bcc.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>tcpdrop [-h]</B>

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

This tool traces TCP packets or segments that were dropped by the kernel, and
shows details from the IP and TCP headers, the socket state, and the
kernel stack trace. This is useful for debugging cases of high kernel drops,
which can cause timer-based retransmits and performance issues.
<P>
This tool works using dynamic tracing of the tcp_drop() kernel function,
which requires a recent kernel version.
<P>
Since this uses BPF, only the root user can use this tool.
<A NAME="lbAE">&nbsp;</A>
<H2>REQUIREMENTS</H2>

CONFIG_BPF and bcc.
<A NAME="lbAF">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT>-h<DD>
Print usage message.
<B>tcpdrop</B>

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>FIELDS</H2>

<DL COMPACT>
<DT>TIME<DD>
Time of the drop, in HH:MM:SS format.
<DT>PID<DD>
Process ID that was on-CPU during the drop. This may be unrelated, as drops
can occur on the receive interrupt and be unrelated to the PID that was
interrupted.
<DT>IP<DD>
IP address family (4 or 6)
<DT>SADDR<DD>
Source IP address.
<DT>SPORT<DD>
Source TCP port.
<DT>DADDR<DD>
Destination IP address.
<DT>DPORT<DD>
Destionation TCP port.
<DT>STATE<DD>
TCP session state (&quot;ESTABLISHED&quot;, etc).
<DT>FLAGS<DD>
TCP flags (&quot;SYN&quot;, etc).
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>OVERHEAD</H2>

This traces the kernel tcp_drop() function, which should be low frequency,
and therefore the overhead of this tool should be negligible.
<P>
As always, test and understand this tools overhead for your types of
workloads before production use.
<A NAME="lbAI">&nbsp;</A>
<H2>SOURCE</H2>

This is from bcc.
<DL COMPACT>
<DT><DD>
<A HREF="https://github.com/iovisor/bcc">https://github.com/iovisor/bcc</A>
</DL>
<P>

Also look in the bcc distribution for a companion _examples.txt file containing
example usage, output, and commentary for this tool.
<A NAME="lbAJ">&nbsp;</A>
<H2>OS</H2>

Linux
<A NAME="lbAK">&nbsp;</A>
<H2>STABILITY</H2>

Unstable - in development.
<A NAME="lbAL">&nbsp;</A>
<H2>AUTHOR</H2>

Brendan Gregg
<A NAME="lbAM">&nbsp;</A>
<H2>SEE ALSO</H2>

<A HREF="https://iovisor.github.io/bcc?8+tcplife">tcplife</A>(8), <A HREF="https://iovisor.github.io/bcc?8+tcpaccept">tcpaccept</A>(8), <A HREF="https://iovisor.github.io/bcc?8+tcpconnect">tcpconnect</A>(8), <A HREF="https://iovisor.github.io/bcc?8+tcptop">tcptop</A>(8)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">REQUIREMENTS</A><DD>
<DT><A HREF="#lbAF">OPTIONS</A><DD>
<DT><A HREF="#lbAG">FIELDS</A><DD>
<DT><A HREF="#lbAH">OVERHEAD</A><DD>
<DT><A HREF="#lbAI">SOURCE</A><DD>
<DT><A HREF="#lbAJ">OS</A><DD>
<DT><A HREF="#lbAK">STABILITY</A><DD>
<DT><A HREF="#lbAL">AUTHOR</A><DD>
<DT><A HREF="#lbAM">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="https://iovisor.github.io/bcc">man2html</A>,
using the manual pages.<BR>
Time: 17:11:49 GMT, February 25, 2020
</BODY>
</HTML>
